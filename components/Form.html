<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Form2Beta Form | Bernard Docs</title>
    <meta name="description" content="Evaluating VuePress for Birchbox">
    
    
    <link rel="preload" href="/birchbox-vuepress/assets/css/0.styles.857ea5f3.css" as="style"><link rel="preload" href="/birchbox-vuepress/assets/js/app.a6b284a8.js" as="script"><link rel="preload" href="/birchbox-vuepress/assets/js/30.0c194aaa.js" as="script"><link rel="prefetch" href="/birchbox-vuepress/assets/js/10.d536d441.js"><link rel="prefetch" href="/birchbox-vuepress/assets/js/100.e3eed064.js"><link rel="prefetch" href="/birchbox-vuepress/assets/js/101.5376d96b.js"><link rel="prefetch" href="/birchbox-vuepress/assets/js/102.868789ed.js"><link rel="prefetch" href="/birchbox-vuepress/assets/js/103.b26899b9.js"><link rel="prefetch" href="/birchbox-vuepress/assets/js/104.5db79103.js"><link rel="prefetch" href="/birchbox-vuepress/assets/js/105.e5fe62d2.js"><link rel="prefetch" href="/birchbox-vuepress/assets/js/106.abc6926b.js"><link rel="prefetch" href="/birchbox-vuepress/assets/js/107.efa45c8f.js"><link rel="prefetch" href="/birchbox-vuepress/assets/js/108.3c8f7c70.js"><link rel="prefetch" href="/birchbox-vuepress/assets/js/109.37f9c620.js"><link rel="prefetch" href="/birchbox-vuepress/assets/js/11.7c95747f.js"><link rel="prefetch" href="/birchbox-vuepress/assets/js/110.798856e4.js"><link rel="prefetch" href="/birchbox-vuepress/assets/js/111.0a125a53.js"><link rel="prefetch" href="/birchbox-vuepress/assets/js/112.9703c050.js"><link rel="prefetch" href="/birchbox-vuepress/assets/js/113.95eb6608.js"><link rel="prefetch" href="/birchbox-vuepress/assets/js/114.1093d492.js"><link rel="prefetch" href="/birchbox-vuepress/assets/js/115.5bfc9bb9.js"><link rel="prefetch" href="/birchbox-vuepress/assets/js/116.3cc5b278.js"><link rel="prefetch" href="/birchbox-vuepress/assets/js/117.4ee1790b.js"><link rel="prefetch" href="/birchbox-vuepress/assets/js/118.e5611d74.js"><link rel="prefetch" href="/birchbox-vuepress/assets/js/119.d801e1c8.js"><link rel="prefetch" href="/birchbox-vuepress/assets/js/12.8cef179e.js"><link rel="prefetch" href="/birchbox-vuepress/assets/js/120.86d0b8bd.js"><link rel="prefetch" href="/birchbox-vuepress/assets/js/121.9550fa71.js"><link rel="prefetch" href="/birchbox-vuepress/assets/js/13.cffe586c.js"><link rel="prefetch" href="/birchbox-vuepress/assets/js/14.709bdaea.js"><link rel="prefetch" href="/birchbox-vuepress/assets/js/15.2ba242d8.js"><link rel="prefetch" href="/birchbox-vuepress/assets/js/16.3e254ad7.js"><link rel="prefetch" href="/birchbox-vuepress/assets/js/17.a0970d0e.js"><link rel="prefetch" href="/birchbox-vuepress/assets/js/18.81232a83.js"><link rel="prefetch" href="/birchbox-vuepress/assets/js/19.0718734b.js"><link rel="prefetch" href="/birchbox-vuepress/assets/js/2.afe850ac.js"><link rel="prefetch" href="/birchbox-vuepress/assets/js/20.07873c92.js"><link rel="prefetch" href="/birchbox-vuepress/assets/js/21.373d67cc.js"><link rel="prefetch" href="/birchbox-vuepress/assets/js/22.94c8eb67.js"><link rel="prefetch" href="/birchbox-vuepress/assets/js/23.82424130.js"><link rel="prefetch" href="/birchbox-vuepress/assets/js/24.2e2e1768.js"><link rel="prefetch" href="/birchbox-vuepress/assets/js/25.a0e7265d.js"><link rel="prefetch" href="/birchbox-vuepress/assets/js/26.a8d8c490.js"><link rel="prefetch" href="/birchbox-vuepress/assets/js/27.87a06732.js"><link rel="prefetch" href="/birchbox-vuepress/assets/js/28.7520adc2.js"><link rel="prefetch" href="/birchbox-vuepress/assets/js/29.e4164a50.js"><link rel="prefetch" href="/birchbox-vuepress/assets/js/3.5f102d8c.js"><link rel="prefetch" href="/birchbox-vuepress/assets/js/31.23d342c7.js"><link rel="prefetch" href="/birchbox-vuepress/assets/js/32.9131fe12.js"><link rel="prefetch" href="/birchbox-vuepress/assets/js/33.a4fdb389.js"><link rel="prefetch" href="/birchbox-vuepress/assets/js/34.1a5c10c5.js"><link rel="prefetch" href="/birchbox-vuepress/assets/js/35.ccbb7573.js"><link rel="prefetch" href="/birchbox-vuepress/assets/js/36.063acf6c.js"><link rel="prefetch" href="/birchbox-vuepress/assets/js/37.3c1d6aff.js"><link rel="prefetch" href="/birchbox-vuepress/assets/js/38.c464e236.js"><link rel="prefetch" href="/birchbox-vuepress/assets/js/39.79fd2668.js"><link rel="prefetch" href="/birchbox-vuepress/assets/js/4.0d731df7.js"><link rel="prefetch" href="/birchbox-vuepress/assets/js/40.ea261179.js"><link rel="prefetch" href="/birchbox-vuepress/assets/js/41.9ed154e3.js"><link rel="prefetch" href="/birchbox-vuepress/assets/js/42.1c6347e3.js"><link rel="prefetch" href="/birchbox-vuepress/assets/js/43.6fdc5b55.js"><link rel="prefetch" href="/birchbox-vuepress/assets/js/44.3104b0a3.js"><link rel="prefetch" href="/birchbox-vuepress/assets/js/45.3aaa6d10.js"><link rel="prefetch" href="/birchbox-vuepress/assets/js/46.00d448c3.js"><link rel="prefetch" href="/birchbox-vuepress/assets/js/47.195eef7f.js"><link rel="prefetch" href="/birchbox-vuepress/assets/js/48.2c055462.js"><link rel="prefetch" href="/birchbox-vuepress/assets/js/49.e2c7a351.js"><link rel="prefetch" href="/birchbox-vuepress/assets/js/5.0c52544e.js"><link rel="prefetch" href="/birchbox-vuepress/assets/js/50.4c1236a0.js"><link rel="prefetch" href="/birchbox-vuepress/assets/js/51.a9ab44f7.js"><link rel="prefetch" href="/birchbox-vuepress/assets/js/52.15f01429.js"><link rel="prefetch" href="/birchbox-vuepress/assets/js/53.f41e8f9d.js"><link rel="prefetch" href="/birchbox-vuepress/assets/js/54.f34aa305.js"><link rel="prefetch" href="/birchbox-vuepress/assets/js/55.904226fc.js"><link rel="prefetch" href="/birchbox-vuepress/assets/js/56.6ee97fc3.js"><link rel="prefetch" href="/birchbox-vuepress/assets/js/57.b2912456.js"><link rel="prefetch" href="/birchbox-vuepress/assets/js/58.ec4cf578.js"><link rel="prefetch" href="/birchbox-vuepress/assets/js/59.0ab6ee02.js"><link rel="prefetch" href="/birchbox-vuepress/assets/js/6.65bbad91.js"><link rel="prefetch" href="/birchbox-vuepress/assets/js/60.609a5462.js"><link rel="prefetch" href="/birchbox-vuepress/assets/js/61.715c841a.js"><link rel="prefetch" href="/birchbox-vuepress/assets/js/62.e420d91d.js"><link rel="prefetch" href="/birchbox-vuepress/assets/js/63.7257c08f.js"><link rel="prefetch" href="/birchbox-vuepress/assets/js/64.c65b3c1d.js"><link rel="prefetch" href="/birchbox-vuepress/assets/js/65.6892f357.js"><link rel="prefetch" href="/birchbox-vuepress/assets/js/66.886d9933.js"><link rel="prefetch" href="/birchbox-vuepress/assets/js/67.b18995d9.js"><link rel="prefetch" href="/birchbox-vuepress/assets/js/68.16b5ca46.js"><link rel="prefetch" href="/birchbox-vuepress/assets/js/69.1afdf6eb.js"><link rel="prefetch" href="/birchbox-vuepress/assets/js/7.5e80c419.js"><link rel="prefetch" href="/birchbox-vuepress/assets/js/70.79c806d7.js"><link rel="prefetch" href="/birchbox-vuepress/assets/js/71.0df6bbe2.js"><link rel="prefetch" href="/birchbox-vuepress/assets/js/72.85a5c675.js"><link rel="prefetch" href="/birchbox-vuepress/assets/js/73.ef7b90f9.js"><link rel="prefetch" href="/birchbox-vuepress/assets/js/74.1a376dd6.js"><link rel="prefetch" href="/birchbox-vuepress/assets/js/75.2074a840.js"><link rel="prefetch" href="/birchbox-vuepress/assets/js/76.bdfb2ca4.js"><link rel="prefetch" href="/birchbox-vuepress/assets/js/77.269ab2c0.js"><link rel="prefetch" href="/birchbox-vuepress/assets/js/78.a66c28ef.js"><link rel="prefetch" href="/birchbox-vuepress/assets/js/79.da1586fb.js"><link rel="prefetch" href="/birchbox-vuepress/assets/js/8.5838ada6.js"><link rel="prefetch" href="/birchbox-vuepress/assets/js/80.5283a3ff.js"><link rel="prefetch" href="/birchbox-vuepress/assets/js/81.ca7a60dd.js"><link rel="prefetch" href="/birchbox-vuepress/assets/js/82.52c2e08c.js"><link rel="prefetch" href="/birchbox-vuepress/assets/js/83.a06e6195.js"><link rel="prefetch" href="/birchbox-vuepress/assets/js/84.b803f53d.js"><link rel="prefetch" href="/birchbox-vuepress/assets/js/85.16f36486.js"><link rel="prefetch" href="/birchbox-vuepress/assets/js/86.2cc56122.js"><link rel="prefetch" href="/birchbox-vuepress/assets/js/87.3f8dfa11.js"><link rel="prefetch" href="/birchbox-vuepress/assets/js/88.effde8f2.js"><link rel="prefetch" href="/birchbox-vuepress/assets/js/89.ec412667.js"><link rel="prefetch" href="/birchbox-vuepress/assets/js/9.f208e5aa.js"><link rel="prefetch" href="/birchbox-vuepress/assets/js/90.ea7fab1e.js"><link rel="prefetch" href="/birchbox-vuepress/assets/js/91.82ddbcf2.js"><link rel="prefetch" href="/birchbox-vuepress/assets/js/92.c74ca7ec.js"><link rel="prefetch" href="/birchbox-vuepress/assets/js/93.326eb4f3.js"><link rel="prefetch" href="/birchbox-vuepress/assets/js/94.02c4ff59.js"><link rel="prefetch" href="/birchbox-vuepress/assets/js/95.6d30da62.js"><link rel="prefetch" href="/birchbox-vuepress/assets/js/96.94d236d9.js"><link rel="prefetch" href="/birchbox-vuepress/assets/js/97.3204ce1e.js"><link rel="prefetch" href="/birchbox-vuepress/assets/js/98.df2ed029.js"><link rel="prefetch" href="/birchbox-vuepress/assets/js/99.86b83b59.js">
    <link rel="stylesheet" href="/birchbox-vuepress/assets/css/0.styles.857ea5f3.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/birchbox-vuepress/" class="home-link router-link-active"><!----> <span class="site-name">Bernard Docs</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"> <a href="https://github.com/zakness/birchbox-vuepress" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"> <a href="https://github.com/zakness/birchbox-vuepress" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/birchbox-vuepress/" class="sidebar-link">Docs</a></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Guides</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Components</span> <span class="arrow right"></span></p> <!----></div></li><li><a href="/birchbox-vuepress/enhancers/" class="sidebar-link">Enhancers</a></li><li><a href="/birchbox-vuepress/middleware/" class="sidebar-link">Middleware</a></li><li><a href="/birchbox-vuepress/utils/" class="sidebar-link">Utils</a></li></ul> </div> <div class="page"> <div class="content"><h1 id="form2beta-form"><a href="#form2beta-form" aria-hidden="true" class="header-anchor">#</a> Form2Beta Form</h1> <p><a href="/src/components/Form2Beta/Form/index.js"><code>Form</code></a> is a form component used to provide form data and functionality to child components.</p> <p>Familiar with the concepts? <a href="#props">Skip down to the props section.</a></p> <h2 id="data-management"><a href="#data-management" aria-hidden="true" class="header-anchor">#</a> Data management</h2> <p>The <code>Form</code> component owns the data in its <code>state</code> object. For simple forms, the data shape is a flat object with key/value pairs where the keys correspond to field names:</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token punctuation">{</span>
  streetAddress1<span class="token punctuation">:</span> <span class="token string">'28 E 28th St'</span><span class="token punctuation">,</span>
  streetAddress2<span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
  city<span class="token punctuation">:</span> <span class="token string">'New York'</span><span class="token punctuation">,</span>
  <span class="token operator">...</span>
<span class="token punctuation">}</span>
</code></pre></div><p>For more complex forms where it is desirable to group fields, the data shape can contain nested objects. In this case, the field names are the dot-notation paths we all know and love:</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token punctuation">{</span>
  shipping<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    streetAddress1<span class="token punctuation">:</span> <span class="token string">'433 W Broadway'</span><span class="token punctuation">,</span> <span class="token comment">// this field’s name is 'shipping.streetAddress1'</span>
    streetAddress2<span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
    city<span class="token punctuation">:</span> <span class="token string">'New York'</span><span class="token punctuation">,</span>
    <span class="token operator">...</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  billing<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    streetAddress1<span class="token punctuation">:</span> <span class="token string">'28 E 28th St'</span><span class="token punctuation">,</span> <span class="token comment">// this field’s name is 'billing.streetAddress1'</span>
    streetAddress2<span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
    city<span class="token punctuation">:</span> <span class="token string">'New York'</span><span class="token punctuation">,</span>
    <span class="token operator">...</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>Form</code> passes the data and an <code>onChange</code> callback down to its child components via the <a href="https://medium.com/merrickchristensen/function-as-child-components-5f3920a9ace9" target="_blank" rel="noopener noreferrer">function-as-child idiom<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>. Fields are expected to get their value from this data and fire <code>onChange</code> when the user updates it. This means that all field components are <a href="https://facebook.github.io/react/docs/forms.html#controlled-components" target="_blank" rel="noopener noreferrer">controlled<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <p>The <code>onChange</code> callback expects its argument to be an object with field name/value pairs. This means we can use the same callback for capturing single and multiple field value changes at once.</p> <p>Here’s a simplified snippet showing how <code>TextInput</code> manages data:</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token function">render</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> name<span class="token punctuation">,</span> value <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props
  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>text<span class="token punctuation">'</span></span> <span class="token attr-name">name</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>name<span class="token punctuation">}</span></span> <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>value<span class="token punctuation">}</span></span> <span class="token attr-name">onChange</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>onChange<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token punctuation">}</span>

<span class="token function">onChange</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// Object with name/value pair. Also note we’re not exposing the DOM event.</span>
  <span class="token comment">// Fields should hide that complexity from consumers — they are just vessels for data.</span>
  <span class="token keyword">const</span> newData <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>name<span class="token punctuation">]</span><span class="token punctuation">:</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value <span class="token punctuation">}</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span><span class="token function">onChange</span><span class="token punctuation">(</span>newData<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="field-definitions-and-client-side-validation"><a href="#field-definitions-and-client-side-validation" aria-hidden="true" class="header-anchor">#</a> Field definitions and client-side validation</h2> <p><code>Form2Beta</code> uses a top-down approach to defining fields. This means that the <code>Form</code> knows upfront what all the fields are, their user-facing labels, and their validation rules. This is achieved using the <code>fieldDefinitions</code> prop, which is an array of field definition objects (or a function that returns such an array — more on that below).</p> <p><strong>Field definition shape</strong></p> <table><thead><tr><th>Prop</th> <th>Type</th> <th>Description</th> <th>Default</th></tr></thead> <tbody><tr><td>label</td> <td>string</td> <td>The user-facing label for the field.</td> <td></td></tr> <tr><td>name</td> <td>string</td> <td>The key (or path) used for the field in the <code>Form</code> data.</td> <td></td></tr> <tr><td>validators</td> <td>arrayOf(validator)|(data) =&gt; arrayOf(validators)</td> <td>Any validators to execute against the field value. If a function, it is passed the current data and should return a list of validators. See <a href="/birchbox-vuepress/utils/validators.html">validator docs</a> for more info.</td> <td></td></tr> <tr><td>requiredMessage</td> <td>string(label) =&gt; message</td> <td>Sets a custom required message for the specific field</td> <td><code>validators -&gt; nonEmpty.message()</code></td></tr> <tr><td>isOptional</td> <td>bool|(data) =&gt; bool</td> <td>Can the field be empty upon submission? A kind of special-case validator. If a function, it is passed the current data. This is useful for fields whose necessity is determined by other field values.</td> <td><code>false</code></td></tr></tbody></table> <p>Field definitions are used for <strong>validation</strong>. When the form is submitted, the <code>fieldDefinitions</code> array is traversed and the <code>validators</code> are run against the data. If any validation fails, their messages are appended to a list of errors which is then displayed to the user via notification. Fields are referred to in error messages by their <code>label</code>.</p> <p>Field definitions are also used for <strong>rendering fields</strong>. Rather than defining names and labels in two places, <code>fieldDefinitions</code> are parsed and passed down to children via <code>fieldProps</code>. See <a href="#child-function-argument-props">Child function argument props</a> below.</p> <p>Field definitions can be <strong>dynamic</strong>. In other words, <code>fieldDefinitions</code> can change throughout the life of the <code>Form</code> component. For example, a user updating a payment method may switch between using an existing billing address and entering a new one. In this case the component that renders <code>Form</code> will change the array passed to the <code>fieldDefinitions</code> prop. Another example is a user switching the country of an address from one that has regions to one that does not (US to PR, for instance). In this case, <code>fieldDefinitions</code> would be a function that accepts the form data as an argument and returns a field definition array based on the country value. In either of these cases, the Form data will privately hold on to all values the user entered (to prevent data loss) but only pass down the values for the fields currently in the <code>fieldDefinitions</code> array.</p> <h2 id="data-massaging"><a href="#data-massaging" aria-hidden="true" class="header-anchor">#</a> Data massaging</h2> <p>Data can be massaged two different ways: synchronously every time data changes via the <code>normalizeData</code> prop and asynchronously before submission via the <code>onBeforeSubmit</code> prop.</p> <p><code>normalizeData</code> is useful for accurately diffing data when the user triggers a change. It also helps consumers of the data by ensuring a consistent shape. For example, you may want to remove a key completely if its value is falsey. Finally, it is useful for providing default values, if necessary.</p> <p><code>onBeforeSubmit</code> is useful for performing a last minute transformation of the data before it gets sent wherever it needs to go. For example, verifying an address via Smarty Streets may end up changing the address data.</p> <h2 id="async-errors"><a href="#async-errors" aria-hidden="true" class="header-anchor">#</a> Async errors</h2> <p>If either the <code>onBeforeSubmit</code> or <code>onSubmit</code> Promises reject with a value, we consider that value to be an error (or array of errors) and display them to the user via notification. If you want to get really fancy, you can structure your errors such that they will correspond with fields and cause the fields to have invalid styling.</p> <p><strong>Error shape</strong></p> <table><thead><tr><th>Prop</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>name</td> <td>string</td> <td>Matches the name in <code>fieldDefinitions</code>.</td></tr> <tr><td>message</td> <td>string</td> <td>Error message.</td></tr></tbody></table> <h2 id="props"><a href="#props" aria-hidden="true" class="header-anchor">#</a> Props</h2> <table><thead><tr><th>Prop</th> <th>Type</th> <th>Description</th> <th>Default</th></tr></thead> <tbody><tr><td>children</td> <td>(form) =&gt; Component</td> <td><code>Form</code> only accepts a child function, which is passed an object with several <code>Form</code> instance methods and variables. See <a href="#child-function-argument-props">Child function argument props</a> below.</td> <td></td></tr> <tr><td>className</td> <td>string</td> <td>Style applied to the container div.</td> <td></td></tr> <tr><td>fieldDefinitions</td> <td>arrayOf(fieldDef) | (data) =&gt; arrayOf(fieldDef)</td> <td>List of objects that define what fields the form will have and how they will be validated. If <code>fieldDefinitions</code> can change depending on Form data, this prop can be a function that accepts the data and returns an array of field definitions. See <a href="##field-definitions-and-client-side-validation">Field definitions</a> above.</td> <td></td></tr> <tr><td>formatErrors</td> <td>(array) =&gt; string</td> <td>Formats errors into a notification string. If <code>undefined</code>, up to three errors are shown, one per line. In the case of four or more errors, they are consolidated into a generic message with an error count.</td> <td></td></tr> <tr><td>initialData</td> <td>obj</td> <td>Initial data object.</td> <td><code>{}</code></td></tr> <tr><td>isSubmitOnEnter</td> <td>bool</td> <td>Make form available to submit pressing &quot;ENTER&quot; key (e.keyCode===13)</td> <td>true</td></tr> <tr><td>normalizeData</td> <td>(obj) =&gt; obj</td> <td>Transforms data into a canonical form. Used for equality comparisons, sanitization, and default values.</td> <td><code>_.identity</code></td></tr> <tr><td>onBeforeSubmit</td> <td>(data) =&gt; Promise(data|undefined)</td> <td>Hook for performing an async action before submitting. If defined, it must return a Promise that resolves with a new data object (or <code>undefined</code> if it is not transforming the data). If the Promise is rejected, form submission is aborted and we notify any errors.</td> <td></td></tr> <tr><td>onSubmit</td> <td>(data) =&gt; Promise</td> <td>Function that performs the desired submit action. If the Promise is rejected, submission is aborted and we notify any errors.</td> <td></td></tr> <tr><td>onSuccessRedirect</td> <td>location|string</td> <td>Location to go to after successful submission. Use <code>{ pathname: ':goback' }</code> to go back.</td> <td></td></tr> <tr><td>resetAfterSubmit</td> <td>bool</td> <td>Reset the form data to <code>initialData</code> after successful submission?</td> <td><code>false</code></td></tr></tbody></table> <h2 id="child-function-argument-props"><a href="#child-function-argument-props" aria-hidden="true" class="header-anchor">#</a> Child function argument props</h2> <table><thead><tr><th>Prop</th> <th>Type</th> <th>Description</th> <th>Default</th></tr></thead> <tbody><tr><td>data</td> <td>object</td> <td>The current form data, limited to fields found in <code>fieldDefinitions</code>.</td> <td><code>{}</code></td></tr> <tr><td>fieldProps</td> <td>arrayOf(fieldProps)</td> <td>A list of props objects for each field. You can think of it as augmented <code>fieldDefinitions</code>. See shape below.</td> <td></td></tr> <tr><td>onChange</td> <td>(data) =&gt; ?</td> <td>Function that is passed a slice of the data to update. Usually attached to components that handle user input but can be fired at any point in order to update the form data.</td> <td></td></tr> <tr><td>reset</td> <td>() =&gt; ?</td> <td>Resets the form data to <code>initialData</code>.</td> <td></td></tr> <tr><td>submit</td> <td>(data) =&gt; Promise</td> <td>The submit method. Typically assigned to the <code>onClick</code> prop of a submit button.</td> <td></td></tr></tbody></table> <p><strong><code>fieldProps</code> shape</strong></p> <table><thead><tr><th>Prop</th> <th>Type</th> <th>Description</th> <th>Default</th></tr></thead> <tbody><tr><td>isInvalid</td> <td>bool</td> <td>Is the field currently invalid?*</td> <td><code>false</code></td></tr> <tr><td>isOptional</td> <td>bool</td> <td>Can the field be empty upon submission? Per Product Design, if a field is optional, we should be appending “ (optional)” to the label when rendering the field.</td> <td><code>false</code></td></tr> <tr><td>label</td> <td>string</td> <td>The user-facing label for the field.</td> <td></td></tr> <tr><td>name</td> <td>string</td> <td>The key (or path) used for the field in the <code>Form</code> data.</td> <td></td></tr> <tr><td>value</td> <td>any</td> <td>The field’s current value.</td> <td></td></tr> <tr><td>...</td> <td>any</td> <td>Other props from any <a href="/birchbox-vuepress/utils/validators.html">validators’ <code>fieldProps</code> prop</a>.</td> <td></td></tr></tbody></table> <p>* <em>We ask ‘is invalid?’ rather than the more intuitive ‘is valid?’ because by default fields are not validated but should appear valid, thus asking ‘is valid?’ before submission causes <a href="https://en.wikipedia.org/wiki/Uncertainty_principle" target="_blank" rel="noopener noreferrer">Heisenberg<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> to spin in his grave.</em></p> <h2 id="example-implementations"><a href="#example-implementations" aria-hidden="true" class="header-anchor">#</a> Example implementations</h2> <ul><li>[views/account/ResetPasswordView] (/src/views/account/ResetPasswordView/index.js) — A simple form to get you started with the minimal wiring up that's required.</li> <li><a href="/src/components/Addresses/AddressForm/index.js">components/AddressForm</a> — A generic address form for capturing basic address data.</li> <li><a href="/src/views/checkout/CheckoutView/AddNewCreditCard/index.js">CheckoutView/AddNewCreditCard</a> — Choosing to use a new credit card in checkout.</li></ul> <h2 id="why-‘beta’"><a href="#why-‘beta’" aria-hidden="true" class="header-anchor">#</a> Why ‘beta’?</h2> <p>The plan is to have <code>components/Form2Beta</code> replace <code>components/Form</code>, but that is a ways off. It’s considered ‘beta’ because the API is not stable, it’s lacking some features, and not all field components are at parity with existing ones. Once <code>Form2Beta</code> powers more of the forms on the site, we can drop the ‘beta’ moniker. Once it powers most of the forms, we can make the push to replace <code>components/Form</code>.</p></div> <div class="page-edit"><div class="edit-link"><a href="https://github.com/zakness/birchbox-vuepress/edit/vuepress/docs/components/Form.md" target="_blank" rel="noopener noreferrer">Edit on GitHub</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">1/14/2019, 10:39:48 PM</span></div></div> <!----> </div> <!----></div></div>
    <script src="/birchbox-vuepress/assets/js/app.a6b284a8.js" defer></script><script src="/birchbox-vuepress/assets/js/30.0c194aaa.js" defer></script>
  </body>
</html>
